# Release Notes: v1.3.2

**Release Date:** January 19, 2026  
**Type:** Patch Release

## Overview

This patch release adds multi-architecture support for macOS, fixing compatibility issues with Intel-based Macs. Previously, v1.3.0 and v1.3.1 only provided Apple Silicon (ARM64) builds.

## Platform Support

### macOS Multi-Architecture Support

**Issue:** Users with Intel Macs encountered `zsh: bad CPU type in executable` errors when trying to run v1.3.0 or v1.3.1, as only ARM64 (Apple Silicon) builds were provided.

**Resolution:** GitHub Actions workflow now builds separate executables for both architectures:
- **macOS ARM64** - For Apple Silicon (M1/M2/M3/M4)
- **macOS x64** - For Intel Macs

**Downloads:**
- `usdxfixgap-v1.3.2-macos-arm64.tar.gz` (Apple Silicon - onefile)
- `usdxfixgap-v1.3.2-macos-arm64-portable.tar.gz` (Apple Silicon - portable)
- `usdxfixgap-v1.3.2-macos-x64.tar.gz` (Intel - onefile)
- `usdxfixgap-v1.3.2-macos-x64-portable.tar.gz` (Intel - portable)

**Which version do I need?** Run `uname -m` in Terminal:
- Output `arm64` → Download ARM64 version
- Output `x86_64` → Download x64 version

**Impact:** Intel Mac users can now run USDXFixGap natively without Rosetta translation or running from source.

## Bug Fixes

### macOS-Specific Fixes

**Fix:** Configure SSL certificates for macOS using certifi
- Resolved `[SSL: CERTIFICATE_VERIFY_FAILED]` errors when downloading Demucs models
- Python on macOS lacks default CA certificates - now uses certifi bundle
- Applies to torch.hub downloads and all HTTPS requests

**Fix:** Prevent NoneType in setEnabled() calls with proper ternary parentheses
- Fixed `TypeError: setEnabled(NoneType)` crash when selecting songs
- Corrected operator precedence in UI button state calculations
- Media player controls now properly enable/disable based on gap detection state

**Fix:** Filter system/metadata files on all platforms during song scan
- Prevents `Failed to determine encoding` errors from macOS AppleDouble (._*) files
- Also filters Windows (Thumbs.db, Desktop.ini) and Linux (~, #*#) metadata
- Song scanner now skips .DS_Store and other system files automatically

### Worker Cancellation and State Management

**Fix:** Add CANCELLED status and preserve song state on cancellation
- Workers now properly report CANCELLED status when terminated
- Song state is preserved when operations are cancelled mid-flight
- Prevents UI inconsistencies when stopping gap detection

**Fix:** Cancel workers before folder switch to prevent stale operations
- Ensures all background tasks are stopped when changing song directories
- Prevents race conditions where old workers complete after new songs are loaded

### Song Parsing

**Fix:** Default missing GAP tag to 0 for PS2 Singstar songs
- Some legacy Singstar format songs lack GAP tags entirely
- Parser now defaults to GAP=0 instead of crashing
- Improves compatibility with older song collections

## Upgrade Recommendation

**Recommended for:** 
- All Intel Mac users (required for compatibility)
- Apple Silicon users who want the latest bug fixes

**Compatibility:** Drop-in replacement for v1.3.1 with no configuration changes required.

## Installation

Download the appropriate build for your platform from the [Releases page](https://github.com/vtietz/usdxfixgapgui/releases/tag/v1.3.2).

### macOS Installation

**Apple Silicon (M1/M2/M3/M4):**
```bash
# Onefile
tar -xzf usdxfixgap-v1.3.2-macos-arm64.tar.gz
chmod +x usdxfixgap
./usdxfixgap

# Portable
tar -xzf usdxfixgap-v1.3.2-macos-arm64-portable.tar.gz
cd usdxfixgap-portable
./usdxfixgap
```

**Intel Mac:**
```bash
# Onefile
tar -xzf usdxfixgap-v1.3.2-macos-x64.tar.gz
chmod +x usdxfixgap
./usdxfixgap

# Portable
tar -xzf usdxfixgap-v1.3.2-macos-x64-portable.tar.gz
cd usdxfixgap-portable
./usdxfixgap
```

## Known Issues

**macOS builds are experimental** - The maintainer develops on Windows and relies on GitHub Actions CI for macOS builds. If you encounter issues:

1. Run diagnostics:
   ```bash
   uname -m          # Check your architecture
   sw_vers           # Check macOS version
   file usdxfixgap   # Verify binary type
   ```

2. Report issues with the above outputs at: https://github.com/vtietz/usdxfixgapgui/issues

3. Workaround: Run from source:
   ```bash
   git clone https://github.com/vtietz/usdxfixgapgui.git
   cd usdxfixgapgui
   ./run.sh install
   ./run.sh start
   ```

## Full Changelog

For a complete list of changes across all versions, see [CHANGELOG.md](../../CHANGELOG.md).

## Previous Release

- [v1.3.1 Release Notes](v1.3.1.md) - Confidence computation fix for M4A/AAC/Opus
