# v2.0.0 - Venv Migration, MDX-Only Detection, GPU Pack robustness

### ⚠️ Breaking Changes

- Migrated from Anaconda/Miniconda to standard Python venv (.venv) with wrapper scripts; first run will create environment automatically.
- Removed Spleeter and HQ Segment detection methods; MDX (Demucs) is the only detection provider.
- Storage location changed to platform-standard app data directories (from v1.1.0); existing configs in app dir are not deleted.
- Removed legacy DefaultOutputPath configuration and top-level 'output' directory concept.

### What's New

#### Detection & Performance
- MDX provider set as default with early-stop logic and model reuse for faster onset detection.
- Configurable vocal start window with iterative expansion for robust detection.

#### GPU Acceleration
- Optional GPU Pack with automatic hardware/version detection, auto-recovery, speed display, and cancellation support.
- Linux support for GPU Pack; dynamic PyTorch/torchaudio compatibility fixes.

#### UI & UX
- Viewport-based lazy loading for song table and instant task lane architecture to keep UI responsive.
- Log viewer improvements (horizontal scroll, better formatting) and window size/position persistence.

#### Developer & Tests
- Tier-3 pipeline integration tests and expanded tier1/tier2 scenarios.
- Config testing infrastructure and integration-light GUI trigger tests.
- Major complexity reductions via strategy patterns and refactors; feature flags removed and unified code paths.

#### Bug Fixes
- Fixed status persistence after gap detection by updating song cache.
- Resolved runtime crashes and standardized worker error signal handling; improved QThread cleanup.
- Fixed MDX model warm-up and import issues; suppressed harmless MP3 warnings and made torchaudio import optional.
- Improved GPU Pack compatibility (wheel structure, version detection, metadata) and startup validation.
- Fixed infinite reload loop and locale number parsing; improved worker queue responsiveness and cancellation.
- Windows subprocess CREATE_NO_WINDOW issue corrected; normalization status update fixed.

### Upgrading from v1.0.0

1. Pull latest code.
2. On Windows, run: .\run.bat install
3. On Linux/macOS, run: ./run.sh install
4. (Optional) Remove old conda env after successful migration.
5. Alternatively, download prebuilt binaries from the Releases page.

**Finding your data directory:**

- Windows: Press Win+R, type %LOCALAPPDATA%\USDXFixGap, press Enter
- Linux: ~/.local/share/USDXFixGap/
- macOS: ~/Library/Application Support/USDXFixGap/

### FAQs

**How do I enable GPU acceleration?**

Use .\run.bat install --gpu on Windows or ./run.sh install --gpu on Linux. The app auto-detects NVIDIA hardware and installs the correct wheels. Offline ZIP installation is supported.

**Do I need to migrate my settings?**

No action is required. The app creates a fresh config in the new data directory on first run. If you want to keep previous settings, copy config.ini (and optionally cache.db) from the old app directory to the new location.

### 🙏 Thanks

Thanks to all contributors and users for feedback, testing, and reports.